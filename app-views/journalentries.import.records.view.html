<!-- <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item active pointer"><a data-target="#">Journal Entries</a></li>
    </ol>
</nav> -->

<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <span class="navbar-brand">Journal Entries</span>
    <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" ui-sref="container.je">Main</a>
        </li>
        <li class="nav-item">
            <a class="nav-link disabled" href="#">Import</a>
          </li>
      </ul>
</nav>

<h4>Records</h4>

<div class="card">
    <div class="card-body">
        <a ui-sref="container.je_import" ng-disabled="loading" class="btn btn-sm btn-outline-info hvr-icon-back"><i class="fa fa-arrow-left hvr-icon"></i> Back</a>
        <button ng-click="post()" ng-disabled="loading" class = "btn btn-sm btn-outline-primary hvr-icon-back"><i class="fa fa-save hvr-icon"></i> Post Selected</button>
        <button ng-click=reverse() ng-disabled="loading" class="btn btn-sm btn-outline-warning hvr-icon-back"><i class="fa fa-undo hvr-icon"></i> Reverse Selected</button>
        <button ng-click="delete()" ng-disabled="loading" class="btn btn-sm btn-outline-danger hvr-icon-back"><i class="fa fa-times hvr-icon"></i> Delete Selected</button>
        <table class="table table-sm table-hover mt-3">
            <thead class="text-center">
                <tr>
                    <th>
                        <div class="custom-control custom-checkbox">
                            <input ng-model="checkAll" type="checkbox" class="custom-control-input" id="check-all">
                            <label class="custom-control-label" for="check-all"></label>
                        </div>
                    </th>
                <th></th>
                <th class="font-weight-light">TransID</th>
                <th class="font-weight-light">RefDate</th>
                <th class="font-weight-light">Total</th>
                <th class="font-weight-light">Remarks</th>
                <th class="font-weight-light">FileName</th>
                <th class="font-weight-light">DateCreated</th>
                <th class="font-weight-light">CreatedBy</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="item in records">
                    <td class="text-center">
                        <div class="custom-control custom-checkbox">
                            <input ng-model="item.Selected" ng-checked="checkAll" type="checkbox" class="custom-control-input check-detail" id="check-{{$index}}">
                            <label class="custom-control-label" for="check-{{$index}}"></label>
                        </div>
                    </td>
                    <td>
                        <!-- <button class="btn btn-xs btn-info" title="View transaction"><i class="fa fa-eye"></i></button> -->
                        <span ng-click="modalDetail(item)" class="link" title="View details"><i class="fa fa-eye"></i></span>
                    </td>
                    <td class="text-center">{{ item.TransID == 0 ? "" : item.TransID }}</td>
                    <td class="text-center">{{ item.RefDate | date:'yyyy-MM-dd' }}</td>
                    <td class="text-right">{{ item.Total | number:2 }}</td>
                    <td>{{ item.Remarks }}</td>
                    <td>{{ item.FileName }}</td>
                    <td class="text-center">{{ item.DateCreated | date: 'yyyy-MM-dd' }}</td>
                    <td class="text-center">{{ item.CreatedBy }}</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>


<!-- Details Modal -->
<div class="modal fade" id="modal-detail" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Transaction View</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
            <div class="form-row">
                <div class="form-group col-sm-2 mt-0 mb-1">
                    <label class="label-sm mb-0" for="input-trx-transid">TransId</label>
                    <input type="text" ng-model="record.TransID" id="input-trx-transid" class="form-control form-control-sm" readonly />
                </div>
                <div class="form-group col-sm-2 mt-0 mb-1">
                    <label class="label-sm mb-0" for="input-trx-transtype">TransType</label>
                    <input type="text" ng-model="record.TransType" id="input-trx-transtype" class="form-control form-control-sm" readonly />
                </div>
                <div class="form-group col-sm-2 mt-0 mb-1">
                    <label class="label-sm mb-0" for="input-trx-refdate">RefDate</label>
                    <input type="text" ng-model="record.RefDate" id="input-trx-refdate" class="form-control form-control-sm" readonly />
                </div>
            </div>
            <div class="form-row mb-sm-3">
                <div class="form-group col-sm-4 mt-0 mb-1">
                    <label class="label-sm mb-0" for="input-trx-memo">Memo</label>
                    <input type="text" ng-model="record.Remarks" id="input-trx-memo" class="form-control form-control-sm" readonly />
                </div>
                <div class="form-group col-sm-2 mt-0 mb-1">
                    <label class="label-sm mb-0" for="input-trx-ref1">Ref1</label>
                    <input type="text" ng-model="record.Ref1" id="input-trx-ref1" class="form-control form-control-sm" readonly />
                </div>
                <div class="form-group col-sm-2 mt-0 mb-1">
                    <label class="label-sm mb-0" for="input-trx-ref2">Ref2</label>
                    <input type="text" ng-model="record.Ref2" id="input-trx-ref2" class="form-control form-control-sm" readonly />
                </div>
                <div class="form-group col-sm-2 mt-0 mb-1">
                    <label class="label-sm mb-0" for="input-trx-ref3">Ref3</label>
                    <input type="text" ng-model="record.Ref3" id="input-trx-ref3" class="form-control form-control-sm" readonly />
                </div>
            </div>
    
            <table class="table table-sm table-hover">
                <thead class="thead-light">
                    <tr class="text-center">
                        <th class="font-weight-light">Line</th>
                        <th class="font-weight-light">AcctCode</th>
                        <th class="font-weight-light">AcctName</th>
                        <th class="font-weight-light">Debit</th>
                        <th class="font-weight-light">Credit</th>
                        <th class="font-weight-light">LineMemo</th>
                        <th class="font-weight-light">Ref1</th>
                        <th class="font-weight-light">Ref2</th>
                        <th class="font-weight-light">Ref3</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="text-center" ng-repeat="item in record.details">
                        <td>{{item.LineId}}</td>
                        <td>{{item.FormatCode}}</td>
                        <td class="text-left">{{item.AcctName}}</td>
                        <td class="text-right">{{item.Debit | number:2}}</td>
                        <td class="text-right">{{item.Credit | number:2}}</td>
                        <td class="text-left">{{item.Remarks}}</td>
                        <td class="text-left">{{item.Ref1}}</td>
                        <td class="text-left">{{item.Ref2}}</td>
                        <td class="text-left">{{item.Ref3}}</td>
                    </tr>
                </tbody>
            </table>
    
            <form class="form-inline justify-content-end mb-1">
                <label>Debit</label>
                <input type="text" class="form-control form-control-sm text-right ml-2" ng-model="sum_debit" readonly />
            </form>
            <form class="form-inline justify-content-end">
                <label>Credit</label>
                <input type="text" class="form-control form-control-sm text-right ml-2" ng-model="sum_credit" readonly />
            </form>
        </div>
      </div>
    </div>
  </div>